<UserControl x:Class="otor.msixhero.ui.Modules.Main.View.MainView"
                     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                     xmlns:Fluent="urn:fluent-ribbon"
                     regions:ViewModelLocator.AutoWireViewModel="True"
                     xmlns:regions="http://prismlibrary.com/"
                     xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
                     xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                     xmlns:enums="clr-namespace:otor.msixhero.lib.BusinessLayer.State.Enums;assembly=otor.msixhero.lib"
                     xmlns:routedCommand="clr-namespace:otor.msixhero.ui.Commands.RoutedCommand"
                     xmlns:commands="clr-namespace:otor.msixhero.ui.Commands"
                     mc:Ignorable="d"
                     d:DataContext="{d:DesignInstance viewModel:MainViewModel}">
    <routedCommand:RoutedCommandHandlers.Commands>
        <routedCommand:RoutedCommandHandler RoutedCommand="{x:Static commands:MsixHeroCommands.RunTool}" Command="{Binding CommandHandler.RunTool}" />
        <routedCommand:RoutedCommandHandler RoutedCommand="{x:Static commands:MsixHeroCommands.OpenManifest}" Command="{Binding CommandHandler.OpenManifest}" />
        <routedCommand:RoutedCommandHandler RoutedCommand="{x:Static commands:MsixHeroCommands.OpenExplorer}" Command="{Binding CommandHandler.OpenExplorer}" />
        <routedCommand:RoutedCommandHandler RoutedCommand="{x:Static commands:MsixHeroCommands.OpenExplorerUser}" Command="{Binding CommandHandler.OpenExplorerUser}" />
        <routedCommand:RoutedCommandHandler RoutedCommand="{x:Static commands:MsixHeroCommands.RunApp}" Command="{Binding CommandHandler.RunApp}" />
        <routedCommand:RoutedCommandHandler RoutedCommand="Refresh" Command="{Binding CommandHandler.Refresh}" />
        <routedCommand:RoutedCommandHandler RoutedCommand="{x:Static commands:MsixHeroCommands.OpenPowerShell}" Command="{Binding CommandHandler.OpenPowerShell}" />
        <routedCommand:RoutedCommandHandler RoutedCommand="{x:Static commands:MsixHeroCommands.MountRegistry}" Command="{Binding CommandHandler.MountRegistry}" />
        <routedCommand:RoutedCommandHandler RoutedCommand="{x:Static commands:MsixHeroCommands.UnmountRegistry}" Command="{Binding CommandHandler.UnmountRegistry}" />
    </routedCommand:RoutedCommandHandlers.Commands>
    <xctk:BusyIndicator IsBusy="{Binding IsLoading}" BusyContent="{Binding LoadingMessage}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid.Resources>
                <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
            </Grid.Resources>

            <Fluent:Ribbon x:Name="Ribbon"  Grid.Row="0">
                <Fluent:Ribbon.ContextualGroups>
                    <Fluent:RibbonContextualTabGroup 
                    x:Name="ToolsGroup"
                    Header="Selected package" 
                    Visibility="Collapsed"
                    Background="Green" 
                    BorderBrush="Green" />
                </Fluent:Ribbon.ContextualGroups>

                <!--Backstage-->
                <Fluent:Ribbon.Menu>
                    <Fluent:Backstage>
                    </Fluent:Backstage>
                </Fluent:Ribbon.Menu>

                <!--Tabs-->
                <Fluent:RibbonTabItem Header="HOME">

                    <Fluent:RibbonGroupBox Header="Context">
                        <Fluent:RibbonGroupBox>
                            <Fluent:Button Header="Refresh" Command="Refresh">
                                <Fluent:Button.LargeIcon>
                                    <Path Style="{StaticResource LargeIcon}" Data="M 16 4 C 10.886719 4 6.617188 7.160156 4.875 11.625 L 6.71875 12.375 C 8.175781 8.640625 11.710938 6 16 6 C 19.242188 6 22.132813 7.589844 23.9375 10 L 20 10 L 20 12 L 27 12 L 27 5 L 25 5 L 25 8.09375 C 22.808594 5.582031 19.570313 4 16 4 Z M 25.28125 19.625 C 23.824219 23.359375 20.289063 26 16 26 C 12.722656 26 9.84375 24.386719 8.03125 22 L 12 22 L 12 20 L 5 20 L 5 27 L 7 27 L 7 23.90625 C 9.1875 26.386719 12.394531 28 16 28 C 21.113281 28 25.382813 24.839844 27.125 20.375 Z" />
                                </Fluent:Button.LargeIcon>
                            </Fluent:Button>
                        </Fluent:RibbonGroupBox>
                        <Fluent:RadioButton GroupName="Users1" Header="Current user" IsChecked="{Binding Context, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static enums:PackageContext.CurrentUser}}">
                            <Fluent:RadioButton.SizeDefinition>
                                <Fluent:RibbonControlSizeDefinition Large="Middle" Small="Middle" Middle="Middle" />
                            </Fluent:RadioButton.SizeDefinition>
                            <Fluent:RadioButton.Icon>
                                <Path Style="{StaticResource MediumIcon}" Data="{StaticResource VectorUser}" />
                            </Fluent:RadioButton.Icon>
                        </Fluent:RadioButton>
                        <Fluent:RadioButton GroupName="Users2" Header="All users" IsChecked="{Binding Context, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static enums:PackageContext.AllUsers}}">
                            <Fluent:RadioButton.SizeDefinition>
                                <Fluent:RibbonControlSizeDefinition Large="Middle" Small="Middle" Middle="Middle" />
                            </Fluent:RadioButton.SizeDefinition>
                            <Fluent:RadioButton.Icon>
                                <Path Style="{StaticResource MediumIcon}" Data="{StaticResource VectorUsers}" />
                            </Fluent:RadioButton.Icon>
                        </Fluent:RadioButton>
                    </Fluent:RibbonGroupBox>

                    <Fluent:RibbonGroupBox Header="App types">
                        <Fluent:CheckBox IsChecked="{Binding ShowStoreApps}" Header="Show Store apps" />
                        <Fluent:CheckBox IsChecked="{Binding ShowSideLoadedApps}" Header="Show Side-loaded apps" />
                        <Fluent:CheckBox IsChecked="{Binding ShowSystemApps}" Header="Show System apps" />
                    </Fluent:RibbonGroupBox>

                    <Fluent:RibbonGroupBox Header="Actions">
                        <Fluent:Button Header="Install package..." >
                            <Fluent:Button.LargeIcon>
                                <Path Data="M 16 3 C 8.832031 3 3 8.832031 3 16 C 3 23.167969 8.832031 29 16 29 C 23.167969 29 29 23.167969 29 16 C 29 8.832031 23.167969 3 16 3 Z M 16 5 C 22.085938 5 27 9.914063 27 16 C 27 22.085938 22.085938 27 16 27 C 9.914063 27 5 22.085938 5 16 C 5 9.914063 9.914063 5 16 5 Z M 15 10 L 15 15 L 10 15 L 10 17 L 15 17 L 15 22 L 17 22 L 17 17 L 22 17 L 22 15 L 17 15 L 17 10 Z" Width="32" Height="32" Fill="Black" />
                            </Fluent:Button.LargeIcon>
                        </Fluent:Button>
                    </Fluent:RibbonGroupBox>
                </Fluent:RibbonTabItem>
                <Fluent:RibbonTabItem Header="VIEW">
                    <Fluent:RibbonGroupBox>
                        <Fluent:ToggleButton Header="Show sidebar" Size="Large" IsChecked="{Binding ShowSidebar}">
                            <Fluent:ToggleButton.Icon>
                                <Path Data="{StaticResource VectorCopy}" Style="{StaticResource LargeIcon}" />
                            </Fluent:ToggleButton.Icon>
                        </Fluent:ToggleButton>
                    </Fluent:RibbonGroupBox>
                </Fluent:RibbonTabItem>
                <Fluent:RibbonTabItem Header="TOOLS">
                    <Fluent:RibbonGroupBox Header="Certificates">
                        <Fluent:Button Header="New self-signed..." />
                        <Fluent:Button Header="Open PowerShell" Command="{x:Static commands:MsixHeroCommands.OpenPowerShell}">
                            <Fluent:Button.LargeIcon>
                                <Path Style="{StaticResource LargeIcon}" Data="{StaticResource VectorPowerShell}" />
                            </Fluent:Button.LargeIcon>
                        </Fluent:Button>
                    </Fluent:RibbonGroupBox>
                </Fluent:RibbonTabItem>
                <Fluent:RibbonTabItem x:Name="TabMaintenance" Header="BASICS" Group="{Binding Source={x:Reference ToolsGroup}}">
                    <Fluent:RibbonGroupBox>
                        <Fluent:SplitButton Header="Copy" Size="Middle">
                            <Fluent:SplitButton.Icon>
                                <Path Data="{StaticResource VectorCopy}" Style="{StaticResource MediumIcon}" />
                            </Fluent:SplitButton.Icon>
                            <Fluent:Button Header="Package name" />
                            <Fluent:Button Header="Publisher (display name)" />
                            <Fluent:Button Header="Publisher (raw)" />
                            <Fluent:Button Header="Install path" />
                            <Fluent:Button Header="Version" />
                        </Fluent:SplitButton>
                    </Fluent:RibbonGroupBox>
                    <Fluent:RibbonGroupBox Header="Control">
                        <Fluent:Button Header="Uninstall">
                            <Fluent:Button.LargeIcon>
                                <Path Style="{StaticResource LargeIcon}" Data="M 16 4 C 9.383 4 4 9.383 4 16 C 4 16.672 4.0647344 17.339 4.1777344 18 L 6.2128906 18 C 6.0758906 17.341 6 16.673 6 16 C 6 10.486 10.486 6 16 6 C 21.514 6 26 10.486 26 16 C 26 16.087545 25.988867 16.174352 25.986328 16.261719 C 25.349748 16.097269 24.6861 16 24 16 C 21.488603 16 19.240982 17.175028 17.771484 19 L 4 19 L 4 27 L 16.591797 27 C 17.78536 29.923538 20.66037 32 24 32 C 28.4 32 32 28.4 32 24 C 32 21.034216 30.36099 18.43607 27.947266 17.054688 C 27.980835 16.704504 28 16.353089 28 16 C 28 9.383 22.617 4 16 4 z M 16 8 C 11.593562 8 8 11.593562 8 16 L 10 16 C 10 12.674438 12.674438 10 16 10 L 16 8 z M 16 13 C 14.346 13 13 14.346 13 16 C 13 16.771 13.300297 17.468 13.779297 18 L 18.220703 18 C 18.700703 17.468 19 16.771 19 16 C 19 14.346 17.654 13 16 13 z M 16 15 C 16.552 15 17 15.449 17 16 C 17 16.551 16.552 17 16 17 C 15.448 17 15 16.551 15 16 C 15 15.449 15.448 15 16 15 z M 24 18 C 27.3 18 30 20.7 30 24 C 30 27.3 27.3 30 24 30 C 20.7 30 18 27.3 18 24 C 18 20.7 20.7 18 24 18 z M 21.699219 20.300781 L 20.300781 21.699219 L 22.599609 24 L 20.300781 26.300781 L 21.699219 27.699219 L 24 25.400391 L 26.300781 27.699219 L 27.699219 26.300781 L 25.400391 24 L 27.699219 21.699219 L 26.300781 20.300781 L 24 22.599609 L 21.699219 20.300781 z M 6 21 L 16.591797 21 C 16.212827 21.928256 16 22.93963 16 24 C 16 24.339374 16.028764 24.67143 16.070312 25 L 6 25 L 6 21 z" />
                            </Fluent:Button.LargeIcon>
                        </Fluent:Button>
                        <Fluent:Button Header="Start" Command="{x:Static commands:MsixHeroCommands.RunApp}" CommandParameter="{Binding SelectedPackage}">
                            <Fluent:Button.LargeIcon>
                                <Path Style="{StaticResource LargeIcon}" Data="M 9 5.15625 L 9 26.84375 L 10.53125 25.84375 L 25.84375 16 L 10.53125 6.15625 Z M 11 8.8125 L 22.15625 16 L 11 23.1875 Z" />
                            </Fluent:Button.LargeIcon>
                        </Fluent:Button>
                    </Fluent:RibbonGroupBox>
                </Fluent:RibbonTabItem>

                <Fluent:RibbonTabItem x:Name="TabDeveloper" Header="DEVELOPER" Group="{Binding Source={x:Reference ToolsGroup}}">
                    <Fluent:RibbonGroupBox Header="Navigation">
                        <Fluent:Button Header="Open install location" Command="{x:Static commands:MsixHeroCommands.OpenExplorer}" CommandParameter="{Binding SelectedPackage}">
                            <Fluent:Button.SizeDefinition>
                                <Fluent:RibbonControlSizeDefinition Large="Middle" Small="Middle" Middle="Middle" />
                            </Fluent:Button.SizeDefinition>
                            <Fluent:Button.Icon>
                                <Path Style="{StaticResource MediumIcon}" Data="M 3 5 L 3 10 L 3 27 L 7 27 L 7 29 L 13.007812 29 L 12.992188 27 L 19.037109 27 L 19.050781 29 L 25 29 L 25 27 L 29 27 L 29 7 L 13.414062 7 L 11.414062 5 L 3 5 z M 5 7 L 10.585938 7 L 11.585938 8 L 10.587891 9 L 5 9.0019531 L 5 7 z M 13.414062 9 L 27 9 L 27 25 L 25 25 L 25 17 L 7 17 L 7 18 L 7 25 L 5 25 L 5 11.001953 L 11.416016 11 L 13.414062 9 z M 9 19 L 23 19 L 23 27 L 21.037109 27 L 20.992188 21 L 10.949219 21 L 10.992188 27 L 9 27 L 9 19 z M 12.962891 23 L 19.007812 23 L 19.021484 25 L 12.978516 25 L 12.962891 23 z" />
                            </Fluent:Button.Icon>
                        </Fluent:Button>
                        <Fluent:Button Header="Open user data location" Command="{x:Static commands:MsixHeroCommands.OpenExplorerUser}" CommandParameter="{Binding SelectedPackage}">
                            <Fluent:Button.SizeDefinition>
                                <Fluent:RibbonControlSizeDefinition Large="Middle" Small="Middle" Middle="Middle" />
                            </Fluent:Button.SizeDefinition>
                            <Fluent:Button.Icon>
                                <Path Style="{StaticResource MediumIcon}" Data="M 3 5 L 3 10 L 3 27 L 7 27 L 7 29 L 13.007812 29 L 12.992188 27 L 19.037109 27 L 19.050781 29 L 25 29 L 25 27 L 29 27 L 29 7 L 13.414062 7 L 11.414062 5 L 3 5 z M 5 7 L 10.585938 7 L 11.585938 8 L 10.587891 9 L 5 9.0019531 L 5 7 z M 13.414062 9 L 27 9 L 27 25 L 25 25 L 25 17 L 7 17 L 7 18 L 7 25 L 5 25 L 5 11.001953 L 11.416016 11 L 13.414062 9 z M 9 19 L 23 19 L 23 27 L 21.037109 27 L 20.992188 21 L 10.949219 21 L 10.992188 27 L 9 27 L 9 19 z M 12.962891 23 L 19.007812 23 L 19.021484 25 L 12.978516 25 L 12.962891 23 z" />
                            </Fluent:Button.Icon>
                        </Fluent:Button>
                        <Fluent:Button Header="Open manifest" Command="{x:Static commands:MsixHeroCommands.OpenManifest}" CommandParameter="{Binding SelectedPackage}">
                            <Fluent:Button.SizeDefinition>
                                <Fluent:RibbonControlSizeDefinition Large="Middle" Small="Middle" Middle="Middle" />
                            </Fluent:Button.SizeDefinition>
                            <Fluent:Button.Icon>
                                <Path Style="{StaticResource MediumIcon}" Data="M 6 3 L 6 29 L 26 29 L 26 9.59375 L 25.71875 9.28125 L 19.71875 3.28125 L 19.40625 3 Z M 8 5 L 18 5 L 18 11 L 24 11 L 24 27 L 8 27 Z M 20 6.4375 L 22.5625 9 L 20 9 Z" />
                            </Fluent:Button.Icon>
                        </Fluent:Button>
                    </Fluent:RibbonGroupBox>
                    <Fluent:RibbonGroupBox Header="Run in package context">
                        <Fluent:InRibbonGallery ItemsSource="{Binding Tools}">
                            <Fluent:InRibbonGallery.ItemTemplate>
                                <DataTemplate>
                                    <Fluent:GalleryItem IsDefinitive="True" Content="{Binding Name}" Command="{x:Static commands:MsixHeroCommands.RunTool}" CommandParameter="{Binding}" />
                                </DataTemplate>
                            </Fluent:InRibbonGallery.ItemTemplate>
                        </Fluent:InRibbonGallery>
                        <Fluent:Button Header="Configure...">
                            <Fluent:Button.LargeIcon>
                                <Path Style="{StaticResource LargeIcon}" Data="M 13.1875 3 L 13.03125 3.8125 L 12.4375 6.78125 C 11.484375 7.15625 10.625 7.683594 9.84375 8.3125 L 6.9375 7.3125 L 6.15625 7.0625 L 5.75 7.78125 L 3.75 11.21875 L 3.34375 11.9375 L 3.9375 12.46875 L 6.1875 14.4375 C 6.105469 14.949219 6 15.460938 6 16 C 6 16.539063 6.105469 17.050781 6.1875 17.5625 L 3.9375 19.53125 L 3.34375 20.0625 L 3.75 20.78125 L 5.75 24.21875 L 6.15625 24.9375 L 6.9375 24.6875 L 9.84375 23.6875 C 10.625 24.316406 11.484375 24.84375 12.4375 25.21875 L 13.03125 28.1875 L 13.1875 29 L 18.8125 29 L 18.96875 28.1875 L 19.5625 25.21875 C 20.515625 24.84375 21.375 24.316406 22.15625 23.6875 L 25.0625 24.6875 L 25.84375 24.9375 L 26.25 24.21875 L 28.25 20.78125 L 28.65625 20.0625 L 28.0625 19.53125 L 25.8125 17.5625 C 25.894531 17.050781 26 16.539063 26 16 C 26 15.460938 25.894531 14.949219 25.8125 14.4375 L 28.0625 12.46875 L 28.65625 11.9375 L 28.25 11.21875 L 26.25 7.78125 L 25.84375 7.0625 L 25.0625 7.3125 L 22.15625 8.3125 C 21.375 7.683594 20.515625 7.15625 19.5625 6.78125 L 18.96875 3.8125 L 18.8125 3 Z M 14.8125 5 L 17.1875 5 L 17.6875 7.59375 L 17.8125 8.1875 L 18.375 8.375 C 19.511719 8.730469 20.542969 9.332031 21.40625 10.125 L 21.84375 10.53125 L 22.40625 10.34375 L 24.9375 9.46875 L 26.125 11.5 L 24.125 13.28125 L 23.65625 13.65625 L 23.8125 14.25 C 23.941406 14.820313 24 15.402344 24 16 C 24 16.597656 23.941406 17.179688 23.8125 17.75 L 23.6875 18.34375 L 24.125 18.71875 L 26.125 20.5 L 24.9375 22.53125 L 22.40625 21.65625 L 21.84375 21.46875 L 21.40625 21.875 C 20.542969 22.667969 19.511719 23.269531 18.375 23.625 L 17.8125 23.8125 L 17.6875 24.40625 L 17.1875 27 L 14.8125 27 L 14.3125 24.40625 L 14.1875 23.8125 L 13.625 23.625 C 12.488281 23.269531 11.457031 22.667969 10.59375 21.875 L 10.15625 21.46875 L 9.59375 21.65625 L 7.0625 22.53125 L 5.875 20.5 L 7.875 18.71875 L 8.34375 18.34375 L 8.1875 17.75 C 8.058594 17.179688 8 16.597656 8 16 C 8 15.402344 8.058594 14.820313 8.1875 14.25 L 8.34375 13.65625 L 7.875 13.28125 L 5.875 11.5 L 7.0625 9.46875 L 9.59375 10.34375 L 10.15625 10.53125 L 10.59375 10.125 C 11.457031 9.332031 12.488281 8.730469 13.625 8.375 L 14.1875 8.1875 L 14.3125 7.59375 Z M 16 11 C 13.25 11 11 13.25 11 16 C 11 18.75 13.25 21 16 21 C 18.75 21 21 18.75 21 16 C 21 13.25 18.75 11 16 11 Z M 16 13 C 17.667969 13 19 14.332031 19 16 C 19 17.667969 17.667969 19 16 19 C 14.332031 19 13 17.667969 13 16 C 13 14.332031 14.332031 13 16 13 Z" />
                            </Fluent:Button.LargeIcon>
                        </Fluent:Button>
                    </Fluent:RibbonGroupBox>
                    <Fluent:RibbonGroupBox Header="Registry">
                        <Fluent:Button Header="Load registry" Command="{x:Static commands:MsixHeroCommands.MountRegistry}">
                            <Fluent:Button.LargeIcon>
                                <Path Data="{StaticResource VectorRegistry}" Width="32" Height="32" Fill="Black" />
                            </Fluent:Button.LargeIcon>
                        </Fluent:Button>
                        <Fluent:Button Header="Unload registry" Command="{x:Static commands:MsixHeroCommands.UnmountRegistry}">
                            <Fluent:Button.LargeIcon>
                                <Path Data="{StaticResource VectorRegistry}" Width="32" Height="32" Fill="Black" />
                            </Fluent:Button.LargeIcon>
                        </Fluent:Button>
                    </Fluent:RibbonGroupBox>
                </Fluent:RibbonTabItem>
            </Fluent:Ribbon>

            <Border Background="#F3F2F1" Grid.Row="2" >
                <ContentControl regions:RegionManager.RegionName="ContentRegion" />
            </Border>
            <Fluent:StatusBar Grid.Row="3">
                <Fluent:StatusBarItem 
                    Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                    Title="Second left placed item"
                    Content="{Binding LoadingMessage}"
                    HorizontalAlignment="Right" />
            </Fluent:StatusBar>
        </Grid>
    </xctk:BusyIndicator>
</UserControl>